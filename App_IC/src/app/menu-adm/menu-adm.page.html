<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Panel Administrador</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- ======================================================
       üë§ USUARIOS
  ====================================================== -->
  <h2 class="section-title">üë§ Usuarios</h2>

  <!-- PAGINACI√ìN USUARIOS -->
  <div class="pagination-container">
    <ion-button fill="outline" (click)="usuariosAnterior()" [disabled]="usuarioPage === 1">
      ‚óÄ Anterior
    </ion-button>

    <span class="page-label">P√°gina {{ usuarioPage }} de {{ usuarioTotalPages }}</span>

    <ion-button fill="outline" (click)="usuariosSiguiente()" [disabled]="usuarioPage === usuarioTotalPages">
      Siguiente ‚ñ∂
    </ion-button>
  </div>

  <!-- LISTADO USUARIOS -->
  <div *ngIf="usuarios.length > 0; else noUsuarios"
       [ngClass]="{ 'grid-desktop': !isMobile, 'grid-mobile': isMobile }">

    <ion-card *ngFor="let u of usuarios" class="card-item">
      <ion-card-header>
        <ion-card-title>{{ u.nombre }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <p><strong>Correo:</strong> {{ u.correo }}</p>
        <p *ngIf="u.celular"><strong>Celular:</strong> {{ u.celular }}</p>
      </ion-card-content>

      <ion-button color="danger" expand="block" (click)="eliminarUsuario(u.id_usuario)">
        <ion-icon slot="start" name="trash-outline"></ion-icon>
        Eliminar
      </ion-button>
    </ion-card>

  </div>

  <ng-template #noUsuarios>
    <p class="empty-text">No hay usuarios registrados</p>
  </ng-template>


  <!-- ======================================================
       üè¢ EMPRESAS
  ====================================================== -->
  <h2 class="section-title">üè¢ Empresas</h2>

  <!-- PAGINACI√ìN EMPRESAS -->
  <div class="pagination-container">
    <ion-button fill="outline" (click)="empresasAnterior()" [disabled]="empresaPage === 1">
      ‚óÄ Anterior
    </ion-button>

    <span class="page-label">P√°gina {{ empresaPage }} de {{ empresaTotalPages }}</span>

    <ion-button fill="outline" (click)="empresasSiguiente()" [disabled]="empresaPage === empresaTotalPages">
      Siguiente ‚ñ∂
    </ion-button>
  </div>

  <!-- LISTADO EMPRESAS -->
  <div *ngIf="empresas.length > 0; else noEmpresas"
       [ngClass]="{ 'grid-desktop': !isMobile, 'grid-mobile': isMobile }">

    <ion-card *ngFor="let e of empresas" class="card-item">
      <ion-card-header>
        <ion-card-title>{{ e.nombre_empresa }}</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <p><strong>Correo:</strong> {{ e.correo }}</p>
        <p><strong>Tel√©fono:</strong> {{ e.telefono }}</p>

        <p><strong>Estado:</strong>
          <span class="estado-tag"
                [ngClass]="(e.estado || 'Pendiente').toLowerCase()">
            {{ e.estado || 'Pendiente' }}
          </span>
        </p>
      </ion-card-content>

      <!-- BOTONES -->
      <div class="btn-group" [ngClass]="{ 'btn-mobile': isMobile }">

        <ion-button color="success" (click)="cambiarEstado(e.id_empresa, 'Aprobado')">
          <ion-icon slot="start" name="checkmark-circle-outline"></ion-icon>
          Aprobar
        </ion-button>

        <ion-button color="warning" (click)="cambiarEstado(e.id_empresa, 'Pendiente')">
          <ion-icon slot="start" name="time-outline"></ion-icon>
          Pendiente
        </ion-button>

        <ion-button color="danger" (click)="cambiarEstado(e.id_empresa, 'Rechazado')">
          <ion-icon slot="start" name="close-circle-outline"></ion-icon>
          Rechazar
        </ion-button>

        <ion-button color="medium" (click)="eliminarEmpresa(e.id_empresa)">
          <ion-icon slot="start" name="trash-outline"></ion-icon>
          Eliminar
        </ion-button>

      </div>

    </ion-card>

  </div>

  <ng-template #noEmpresas>
    <p class="empty-text">No hay empresas registradas</p>
  </ng-template>

</ion-content>
