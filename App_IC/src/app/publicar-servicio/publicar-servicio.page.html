<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Publicar Servicio</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">

  <h2 style="text-align:center; margin-bottom:20px;">Registrar nuevo servicio</h2>

  <form (ngSubmit)="registrarServicio()" #formServicio="ngForm">

    <!-- NOMBRE -->
    <ion-item [class.invalid]="nombre.invalid && nombre.touched">
      <ion-label position="floating">Nombre *</ion-label>
      <ion-input
        type="text"
        name="nombre_servicio"
        [(ngModel)]="servicio.nombre_servicio"
        #nombre="ngModel"
        required
        minlength="3"
      ></ion-input>
    </ion-item>
    <div class="error-text" *ngIf="nombre.invalid && nombre.touched">
      El nombre debe tener al menos 3 caracteres.
    </div>

    <!-- DESCRIPCIN -->
    <ion-item [class.invalid]="descripcion.invalid && descripcion.touched">
      <ion-label position="floating">Descripci贸n *</ion-label>
      <ion-input
        type="text"
        name="descripcion_servicio"
        [(ngModel)]="servicio.descripcion_servicio"
        #descripcion="ngModel"
        required
        minlength="10"
      ></ion-input>
    </ion-item>
    <div class="error-text" *ngIf="descripcion.invalid && descripcion.touched">
      La descripci贸n debe tener m铆nimo 10 caracteres.
    </div>

    <!-- COSTO -->
    <ion-item [class.invalid]="costo.invalid && costo.touched">
      <ion-label position="floating">Costo (CLP) *</ion-label>
      <ion-input
        type="number"
        name="costo_servicio"
        [(ngModel)]="servicio.costo_servicio"
        #costo="ngModel"
        required
        min="1"
      ></ion-input>
    </ion-item>
    <div class="error-text" *ngIf="costo.invalid && costo.touched">
      El costo debe ser un n煤mero mayor a 0.
    </div>

    <!-- HORARIOS -->
    <ion-item [class.invalid]="horario.invalid && horario.touched">
      <ion-label position="floating">Horarios *</ion-label>
      <ion-input
        type="text"
        name="horario_disponible"
        [(ngModel)]="servicio.horario_disponible"
        #horario="ngModel"
        required
      ></ion-input>
    </ion-item>
    <div class="error-text" *ngIf="horario.invalid && horario.touched">
      El horario es obligatorio.
    </div>

    <!-- DIRECCIN -->
    <ion-item [class.invalid]="direccion.invalid && direccion.touched">
      <ion-label position="floating">Direcci贸n *</ion-label>
      <ion-input
        type="text"
        name="direccion_lugar"
        [(ngModel)]="servicio.direccion_lugar"
        #direccion="ngModel"
        required
        minlength="5"
      ></ion-input>
    </ion-item>
    <div class="error-text" *ngIf="direccion.invalid && direccion.touched">
      La direcci贸n debe tener m铆nimo 5 caracteres.
    </div>

    <!-- NOMBRE LUGAR -->
    <ion-item [class.invalid]="lugar.invalid && lugar.touched">
      <ion-label position="floating">Nombre del Lugar *</ion-label>
      <ion-input
        type="text"
        name="nombre_lugar"
        [(ngModel)]="servicio.nombre_lugar"
        #lugar="ngModel"
        required
      ></ion-input>
    </ion-item>
    <div class="error-text" *ngIf="lugar.invalid && lugar.touched">
      Debes ingresar el nombre del lugar.
    </div>

    <!-- TIPO DISCAPACIDAD -->
    <ion-item [class.invalid]="discapacidad.invalid && discapacidad.touched">
      <ion-label>Tipo de discapacidad *</ion-label>
      <ion-select
        name="id_discapacidad"
        [(ngModel)]="servicio.id_discapacidad"
        #discapacidad="ngModel"
        required
      >
        <ion-select-option *ngFor="let tipo of tiposDiscapacidad" [value]="tipo.id_discapacidad">
          {{ tipo.nombre_discapacidad }}
        </ion-select-option>
      </ion-select>
    </ion-item>
    <div class="error-text" *ngIf="discapacidad.invalid && discapacidad.touched">
      Debes seleccionar un tipo de discapacidad.
    </div>

    <!-- UBICACIN -->
    <ion-button expand="block" color="medium" (click)="obtenerUbicacion()">
       Usar mi ubicaci贸n actual
    </ion-button>

    <div id="map"></div>

    <!-- BOTN -->
    <ion-button expand="block" type="submit" color="success" [disabled]="formServicio.invalid">
      Registrar Servicio
    </ion-button>

  </form>

</ion-content>
