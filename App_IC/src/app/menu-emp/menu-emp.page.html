<ion-header>
  <ion-toolbar color="primary">
    
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Panel de Empresa</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  
  <ng-container *ngIf="empresa; else cargando">
    
    
    <ion-card>
      <ion-card-header>
        <ion-card-title>{{ empresa.nombre_empresa }}</ion-card-title>
        <ion-card-subtitle [ngStyle]="{color: empresa.Estado === 'Aprobado' ? 'green' : (empresa.Estado === 'Rechazado' ? 'red' : 'orange')}">
          {{ empresa.Estado || 'En proceso' }}
        </ion-card-subtitle>
      </ion-card-header>

      <ion-card-content>
        <p><strong>ğŸ“ DirecciÃ³n:</strong> {{ empresa.direccion_empresa }}</p>
        <p><strong>ğŸ“ TelÃ©fono:</strong> {{ empresa.telefono }}</p>
        <p><strong>âœ‰ï¸ Correo:</strong> {{ empresa.Correo }}</p>
        <p><strong>ğŸ•’ Horarios:</strong> {{ empresa.horarios }}</p>
        <p><strong>ğŸ“ DescripciÃ³n:</strong> {{ empresa.descripcion_empresa }}</p>

        <ion-button expand="block" color="warning" (click)="editarEmpresa(empresa)">
          âœï¸ Editar Empresa
        </ion-button>
      </ion-card-content>
    </ion-card>

    
    <ion-card>
      <ion-card-header>
        <ion-card-title>ğŸ§¾ Servicios Publicados</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <ng-container *ngIf="servicios.length > 0; else sinServicios">
          <ion-list>
            <ion-item *ngFor="let s of servicios" class="servicio-item">
              <ion-label>
                <h2 class="titulo-servicio"><strong>{{ s.nombre_servicio }}</strong></h2>
                <p>{{ s.descripcion_servicio }}</p>
                <p><strong>ğŸ•’ Horario:</strong> {{ s.horario_disponible }}</p>
                <p><strong>ğŸ’° Costo:</strong> {{ s.costo_servicio | currency:'CLP' }}</p>
                <p><strong>ğŸ“ Lugar:</strong> {{ s.nombre_lugar }} - {{ s.direccion_lugar }}</p>
                <p><strong>â™¿ Discapacidad:</strong> {{ s.nombre_discapacidad || 'No especificado' }}</p>

                
                <div *ngIf="s.resenas?.length > 0" class="resenas-container">
                  <ion-list>
                    <ion-item *ngFor="let r of s.resenas">
                      <ion-icon slot="start" name="star" color="warning"></ion-icon>
                      <ion-label>
                        <p><strong>{{ r.valoracion }}/5</strong> - {{ r.comentarios }}</p>
                        <small>{{ r.fecha_resena | date:'shortDate' }}</small>
                      </ion-label>
                    </ion-item>
                  </ion-list>
                </div>

                <p *ngIf="!s.resenas?.length" class="no-resenas">
                  No hay reseÃ±as para este servicio.
                </p>

                
                <div class="acciones-servicio">
                  <ion-button color="warning" fill="outline" size="small" (click)="editarServicio(s)">
                    âœï¸ Editar
                  </ion-button>
                  <ion-button color="danger" fill="outline" size="small" (click)="eliminarServicio(s.id_servicio)">
                    ğŸ—‘ï¸ Eliminar
                  </ion-button>
                </div>
              </ion-label>
            </ion-item>
          </ion-list>
        </ng-container>

        
        <ng-template #sinServicios>
          <div class="sin-servicios">
            <ion-icon name="information-circle-outline" size="large" color="medium"></ion-icon>
            <p>No hay servicios registrados para esta empresa.</p>
          </div>
        </ng-template>
      </ion-card-content>
    </ion-card>
  </ng-container>

  
  <ng-template #cargando>
    <div class="cargando">
      <ion-spinner name="crescent"></ion-spinner>
      <p>Cargando informaciÃ³n de la empresa...</p>
    </div>
  </ng-template>
</ion-content>
